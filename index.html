<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Ø®Ø¯Ù…Ø© ÙˆØµÙØªÙŠ â€“ ØµÙŠØ¯Ù„ÙŠØ§Øª Ø´Ù…Ø³</title>
<style>
  :root{
    --primary:#0284c7;
    --primary-dark:#0369a1;
    --success:#16a34a;
    --danger:#dc2626;
    --bg:#f1f5f9;
    --card-bg:#ffffff;
    --radius:14px;
  }
  body{
    font-family:Tahoma,Arial,sans-serif;
    background:var(--bg);
    margin:0;
  }
  .wrap{
    max-width:720px;
    margin:16px auto;
    background:var(--card-bg);
    padding:24px;
    border-radius:var(--radius);
    box-shadow:0 4px 16px rgba(0,0,0,0.08);
  }
  h1{margin:0 0 10px;font-size:24px;color:#0f172a;}
  p{color:#334155;font-size:15px;}

  .seg{
    display:flex;gap:10px;margin:16px 0;
  }
  .seg button{
    flex:1;padding:14px;border-radius:var(--radius);
    border:1px solid #cbd5e1;background:#e2e8f0;
    cursor:pointer;font-weight:700;
  }
  .seg button.active{
    background:var(--primary);color:#fff;border-color:var(--primary-dark);
  }

  label{font-size:15px;font-weight:600;margin:12px 0 6px;display:block;color:#0f172a;}
  input,textarea{
    width:100%;padding:12px;border:1px solid #cbd5e1;
    border-radius:var(--radius);font-size:15px;
  }
  textarea{min-height:80px;}

  .btn{
    width:100%;padding:15px;border:none;border-radius:var(--radius);
    font-size:17px;font-weight:bold;cursor:pointer;margin-top:18px;
  }
  .btn-primary{background:var(--primary);color:#fff;}
  .btn-primary:hover{background:var(--primary-dark);}

  .error{color:var(--danger);margin-top:8px;font-size:14px;}

  #doneView{text-align:center;}

  .footer{
    margin-top:20px;text-align:center;font-size:13px;color:#555;
  }
</style>
</head>

<body>
<div class="wrap">

<h1>Ø®Ø¯Ù…Ø© ÙˆØµÙØªÙŠ â€“ ØµÙŠØ¯Ù„ÙŠØ§Øª Ø´Ù…Ø³</h1>
<p>Ø§Ø®ØªÙØ± Ø·Ø±ÙŠÙ‚Ø© Ø§Ø³ØªÙ„Ø§Ù… ÙˆØµÙØªÙƒ</p>

<div class="seg" id="modeSeg">
  <button data-mode="pickup" class="active">ğŸš¶â€â™‚ï¸ Ø§Ø³ØªÙ„Ø§Ù… Ù…Ù† Ø§Ù„ÙØ±Ø¹</button>
  <button data-mode="delivery">ğŸšš ØªÙˆØµÙŠÙ„ Ù„Ù„Ù…Ù†Ø²Ù„</button>
</div>

<div id="formView">

<label>Ø±Ù‚Ù… Ø§Ù„Ù‡ÙˆÙŠØ©</label>
<input id="id_number" type="text" placeholder="1012345678">

<label>Ø±Ù‚Ù… Ø§Ù„ÙˆØµÙØ©</label>
<input id="rx_number" type="text" placeholder="A123456789">

<div id="deliveryBlock" style="display:none;">
  
  <label>Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„</label>
  <input id="mobile" type="tel" placeholder="05xxxxxxxx">

  <label>ğŸ“ ØªØ­Ø¯ÙŠØ¯ Ù…ÙˆÙ‚Ø¹ÙŠ</label>
  <button id="locBtn" class="btn btn-primary" style="margin-top:6px;">ğŸ“ Ø­Ø¯Ø¯ Ù…ÙˆÙ‚Ø¹ÙŠ Ø§Ù„Ø¢Ù†</button>
  <div id="locStatus" style="font-size:13px;margin-top:6px;"></div>

  <label>ÙˆØµÙ Ø§Ù„Ø¹Ù†ÙˆØ§Ù†</label>
  <textarea id="addr" placeholder="Ø§Ø³Ù… Ø§Ù„Ø­ÙŠ + Ø£Ù‚Ø±Ø¨ Ù…Ø¹Ù„Ù…"></textarea>

</div>

<div style="margin-top:10px;">
<input id="consent" type="checkbox"> Ø£ÙˆØ§ÙÙ‚ Ø¹Ù„Ù‰ Ù…Ø´Ø§Ø±ÙƒØ© Ø¨ÙŠØ§Ù†Ø§ØªÙŠ Ù„ØºØ±Ø¶ ØªØ¬Ù‡ÙŠØ² Ø§Ù„Ø·Ù„Ø¨
</div>

<button class="btn btn-primary" id="sendBtn">Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨ Ø§Ù„Ø¢Ù†</button>

<div id="errorMsg" class="error"></div>

</div>

<div id="doneView" style="display:none;">
<h2 style="color:var(--success);">âœ… ØªÙ… ØªØ¬Ù‡ÙŠØ² Ø§Ù„Ø·Ù„Ø¨</h2>
<p>ØªÙ… ÙØªØ­ Ø§Ù„ÙˆØ§ØªØ³Ø§Ø¨ Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø±Ø³Ø§Ù„Ø©</p>
<a id="waLink" class="btn btn-primary" style="margin-bottom:12px;" target="_blank">ğŸ”— ØªÙˆØ§ØµÙ„ Ø¹Ø¨Ø± ÙˆØ§ØªØ³Ø§Ø¨</a>
<button id="newReq" class="btn" style="background:#cbd5e1;">Ø·Ù„Ø¨ Ø¬Ø¯ÙŠØ¯</button>
</div>

<div class="footer">
ØµÙŠØ¯Ù„ÙŠØ© Ø´Ù…Ø³ â€“ Ø­ÙŠ Ø§Ù„Ø¯Ø§Ø± Ø§Ù„Ø¨ÙŠØ¶Ø§Ø¡ â€“ Ø´Ø§Ø±Ø¹ Ø§Ø¨Ù† Ø­Ø¬Ø±<br>
ÙˆØ§ØªØ³Ø§Ø¨: 0592627644
</div>

</div>

<script>
(function(){
  const WHATSAPP = "966592627644";
  const modeSeg=document.getElementById("modeSeg");
  const deliveryBlock=document.getElementById("deliveryBlock");
  const idEl=document.getElementById("id_number");
  const rxEl=document.getElementById("rx_number");
  const mobileEl=document.getElementById("mobile");
  const addrEl=document.getElementById("addr");
  const locStatus=document.getElementById("locStatus");
  const consentEl=document.getElementById("consent");
  const waLink=document.getElementById("waLink");
  const formView=document.getElementById("formView");
  const doneView=document.getElementById("doneView");
  const errorMsg=document.getElementById("errorMsg");

  let mode="pickup";
  let gpsLink="";

  modeSeg.addEventListener("click",(e)=>{
    const b=e.target.closest("button[data-mode]");
    if(!b) return;
    mode=b.dataset.mode;
    [...modeSeg.children].forEach(x=>x.classList.remove("active"));
    b.classList.add("active");
    deliveryBlock.style.display=(mode==="delivery")?"block":"none";
  });

  document.getElementById("locBtn").onclick=()=>{
    locStatus.innerHTML="â³ Ø¬Ø§Ø±Ù ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹...";
    navigator.geolocation.getCurrentPosition(pos=>{
      gpsLink=`https://maps.google.com/?q=${pos.coords.latitude},${pos.coords.longitude}`;
      locStatus.innerHTML="âœ… ØªÙ… Ø§Ù„ØªÙ‚Ø§Ø· Ù…ÙˆÙ‚Ø¹Ùƒ";
    },()=>{
      locStatus.innerHTML="âš  ØªØ¹Ø°Ø± ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹";
    });
  };

  function buildMessage(){
    let m="";
    m+=(mode==="pickup"?"ğŸ”” Ø§Ø³ØªÙ„Ø§Ù… Ù…Ù† Ø§Ù„ÙØ±Ø¹":"ğŸšš ØªÙˆØµÙŠÙ„ Ù„Ù„Ù…Ù†Ø²Ù„")+"\n";
    m+="Ø±Ù‚Ù… Ø§Ù„Ù‡ÙˆÙŠØ©: "+idEl.value+"\n";
    m+="Ø±Ù‚Ù… Ø§Ù„ÙˆØµÙØ©: "+rxEl.value+"\n";
    if(mode==="delivery"){
      m+="Ø§Ù„Ø¬ÙˆØ§Ù„: "+mobileEl.value+"\n";
      m+="Ø§Ù„Ø¹Ù†ÙˆØ§Ù†: "+addrEl.value+"\n";
      m+="ğŸ“ Ø§Ù„Ù…ÙˆÙ‚Ø¹: "+(gpsLink||"Ù„Ù… ÙŠÙØ­Ø¯Ù‘Ø¯")+"\n";
    }
    m+="\n*ØªÙ…Øª Ù…ÙˆØ§ÙÙ‚Ø© Ø§Ù„Ø¹Ù…ÙŠÙ„ Ø¹Ù„Ù‰ Ù…Ø´Ø§Ø±ÙƒØ© Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª*";
    return m;
  }

  document.getElementById("sendBtn").onclick=()=>{
    errorMsg.innerHTML="";
    if(!idEl.value || !rxEl.value)
      return errorMsg.innerHTML="âš  Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ù‡ÙˆÙŠØ© ÙˆØ§Ù„ÙˆØµÙØ©";

    if(!consentEl.checked)
      return errorMsg.innerHTML="âš  Ø¨Ø±Ø¬Ø§Ø¡ Ø§Ù„Ù…ÙˆØ§ÙÙ‚Ø© Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø·Ù„Ø¨";

    if(mode==="delivery"){
      if(!mobileEl.value) return errorMsg.innerHTML="âš  Ø£Ø¯Ø®Ù„ Ø±Ù‚Ù… Ø§Ù„Ø¬ÙˆØ§Ù„";
      if(!gpsLink) return errorMsg.innerHTML="âš  ÙŠØ¬Ø¨ ØªØ­Ø¯ÙŠØ¯ Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù„Ù„ØªÙˆØµÙŠÙ„";
    }

    const msg=buildMessage();
    const wa="https://wa.me/"+WHATSAPP+"?text="+encodeURIComponent(msg);

    window.location.href=wa;

    formView.style.display="none";
    doneView.style.display="block";
    waLink.href=wa;
  };

  document.getElementById("newReq").onclick=()=>location.reload();
})();
</script>

</body>
</html>
